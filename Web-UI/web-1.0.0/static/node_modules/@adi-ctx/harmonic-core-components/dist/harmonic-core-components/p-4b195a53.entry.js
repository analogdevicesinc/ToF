import{r as o,c as t,h as i,H as r,g as e}from"./p-fa447fbf.js";import{r as s}from"./p-06eda941.js";const a=class{constructor(i){o(this,i),this.toggled=t(this,"toggled",7),this.changed=t(this,"changed",7),this._hasIcon=!1,this._didInit=!1,this.placeholder="Select",this.size="md",this.value=void 0,this.name=void 0,this.label="",this.isDisabled=!1,this.isClearable=!1,this.status="normal",this.helperText=void 0,this.selectedText=void 0,this.scrollContainerId=void 0,this.forcePlacement=void 0,this.isRequired=void 0,this.optionalText=void 0,this.multiple=!1,this.maxVisibleOpts=8,this.alignment="left",this.isExpanded=!1,this.placement="bottom",this.v3EventBehaviour=!1}handleClick(o){var t;(null===(t=null==o?void 0:o.composedPath())||void 0===t?void 0:t.includes(this.el))&&this.toggle()}get childOpts(){var o;return Array.from((null===(o=this.el)||void 0===o?void 0:o.querySelectorAll("hmc-dropdown-option"))||[])}toggle(){if(!this.isDisabled){if(!this.isExpanded){const o=document.getElementById(this.scrollContainerId)||document.documentElement,t=this.el.getBoundingClientRect().bottom,i=o.getBoundingClientRect().bottom;this.placement=this.forcePlacement?this.forcePlacement:i-t>this._maxListContainerHeight+20?"bottom":"top"}this.isExpanded=!this.isExpanded,this.toggled.emit({isActive:this.isExpanded})}}handleSelection(o){this.multiple?this.handleMultipleSelection(o):(this.isExpanded=!1,this.toggled.emit({isActive:!1}),o.detail.selected?this.value=o.detail.value:this.isClearable&&(this.value=void 0),this.v3EventBehaviour&&this.changed.emit({value:this.value})),this.setOptionSelection()}handleMultipleSelection(o){o.detail.selected?this.value=Array.isArray(this.value)?[...this.value,o.detail.value]:[o.detail.value]:Array.isArray(this.value)?(this.value=this.value.filter((t=>t!==o.detail.value)),this.value.length||(this.value=void 0)):this.value=void 0}setOptionSelection(){this.childOpts.forEach((o=>{o.isSelected=this.isOptionSelected(o.value)}))}handleBlur(o){var t;this.isExpanded&&"HMC-DROPDOWN-OPTION"!==(null===(t=o.relatedTarget)||void 0===t?void 0:t.tagName)&&o.relatedTarget!==this.el&&(this.isExpanded=!1,this.toggled.emit({isActive:this.isExpanded}))}valueChanged(){this.multiple&&"string"==typeof this.value&&"["===this.value[0]&&(this.value=JSON.parse(this.value)),this._didInit&&!this.v3EventBehaviour&&this.changed.emit({value:this.value}),this.setOptionSelection()}setListHeight(){const o={xs:24,md:40},t=this.childOpts.length>0?this.childOpts[0].size:"md",i=this.el.shadowRoot.querySelector(".list-container");this._maxListContainerHeight=o[t]*this.maxVisibleOpts+o[t]/2,i.style.maxHeight=this._maxListContainerHeight+"px"}componentWillLoad(){this.multiple&&this.valueChanged(),this.multiple&&this.value&&!Array.isArray(this.value)&&(this.value=[this.value]),this.setOptionSelection(),this._didInit=!0}componentDidLoad(){this.setListHeight()}render(){const{size:o,value:t,name:e,label:a,optionalText:l,placeholder:n,placement:h,alignment:d,helperText:c,isDisabled:p,isExpanded:m,isRequired:v,status:g}=this;s(this.el,e,p,this.getText()),this._hasIcon=Boolean(this.el.querySelector('[slot="icon"]'));const u={dropdown:!0,expanded:m,disabled:p,[o]:!0,[g]:!0},f={"dropdown-content":!0,filled:Boolean(t)},x={"list-container":!0,hidden:!m,[h]:!0,[d]:!0,[o]:!0};return i(r,null,i("div",{class:"input-label "+o},!!a&&i("span",{class:"label"},i("label",{htmlFor:"hmc-dropdown-id"},a),i("span",{class:"hint"},i("slot",{name:"hint"}))),!1===v&&i("span",{class:"label-optional"},l)),i("button",{class:u,"aria-haspopup":"listbox",disabled:p},i("div",{class:f},i("slot",{name:"icon"}),i("div",{class:"dropdown-text"},t?this.getText():n)),i("hmc-icon",{class:"dropdown-arrow",name:"chevron-down-m"})),i("div",{role:"listbox",class:x},i("slot",null)),"normal"!==g&&Boolean(c)&&i("div",{class:"helper-text"},i("hmc-message",{status:g},c)))}getText(){return Boolean(this.selectedText)&&""!==this.selectedText?this.selectedText:this.childOpts.filter((o=>o.isSelected)).map((o=>o.textContent.trim())).join(", ")}isOptionSelected(o){return void 0!==this.value&&(Array.isArray(this.value)?this.value.some((t=>t===o)):this.value===o)}get el(){return e(this)}static get watchers(){return{value:["valueChanged"],maxVisibleOpts:["setListHeight"]}}};a.style=':host{display:inline-block;position:relative;font-family:var(--font-family-body, "Inter", sans-serif);width:100%}.input-label{display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-self:stretch}.input-label .label{font-size:var(--font-size-default, 14px);color:var(--hmc-color-content-default, var(--hmc-color-gray-black, #101820));font-weight:normal;line-height:20px;margin-bottom:4px;display:inline-flex;align-items:center}.input-label.xs .label{font-size:var(--font-size-small, 12px);line-height:16px}.input-label .hint{margin:0 4px}.input-label .label-optional{font-size:var(--font-size-small, 12px);font-weight:normal;line-height:1.33;color:var(--hmc-color-content-subtle, var(--hmc-color-gray-700, #5e6773));margin-bottom:4px;margin-left:auto}.dropdown{width:100%;height:40px;position:relative;display:flex;align-items:center;padding:4px 8px;border:1px solid var(--hmc-color-interactive-subtle-idle, var(--hmc-color-gray-500, #848b95));border-radius:4px;font-size:var(--font-size-default, 14px);color:var(--hmc-color-content-default, var(--hmc-color-gray-black, #101820));background-color:var(--hmc-color-layout-container, var(--hmc-color-gray-white, #fff))}.dropdown.sm{height:32px}.dropdown.xs{height:24px}.dropdown.xs .dropdown-content{font-size:var(--font-size-small, 12px);line-height:16px}.dropdown.error{border-color:var(--hmc-color-notification-danger-default-border, var(--hmc-color-system-danger-default, var(--hmc-color-red-700, #c81a28)))}.dropdown.warning{border-color:var(--hmc-color-notification-warning-default-border, var(--hmc-color-system-warning-default, var(--hmc-color-orange-500, #e76423)))}.dropdown:hover{cursor:pointer;border-color:var(--hmc-color-interactive-subtle-hover, var(--hmc-color-gray-700, #5e6773))}.dropdown:focus,.dropdown :focus-visible,.dropdown :focus-within{border-color:var(--hmc-color-interactive-focus, var(--hmc-color-system-highlight-default, var(--hmc-color-purple-500, #b16ee0)));box-shadow:inset 0 0 0 1px var(--hmc-color-interactive-focus, var(--hmc-color-system-highlight-default, var(--hmc-color-purple-500, #b16ee0)));outline:none}.dropdown.expanded .dropdown-arrow{transform:translateY(-50%) rotate(180deg)}.dropdown.disabled{pointer-events:none;background:var(--hmc-color-system-info-silent, var(--hmc-color-gray-100, #f0f1f3));color:var(--hmc-color-content-silent, var(--hmc-color-gray-400, #9fa4ad));border-color:var(--hmc-color-interactive-subtle-disabled, var(--hmc-color-gray-200, #d5d8dc));cursor:not-allowed}.dropdown.disabled .dropdown-arrow{fill:var(--hmc-color-content-silent, var(--hmc-color-gray-400, #9fa4ad))}.dropdown.disabled .dropdown-content{color:var(--hmc-color-content-silent, var(--hmc-color-gray-400, #9fa4ad))}.dropdown-content{display:inline-flex;align-items:center;border-radius:4px 0 0 4px;user-select:none;color:var(--hmc-color-content-subtle, var(--hmc-color-gray-700, #5e6773));max-width:100%}.dropdown-content.filled{color:var(--hmc-color-content-default, var(--hmc-color-gray-black, #101820))}.dropdown-content .dropdown-text{max-width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin-right:16px}.dropdown-content slot[name=icon]::slotted(*){margin-right:8px}.dropdown-arrow{display:block;position:absolute;top:50%;right:0;transform:translateY(-50%)}.list-container{gap:6px;display:grid;padding:6px 4px;border-radius:8px;border:1px solid var(--hmc-color-layout-divider-default, var(--hmc-color-gray-300, #b7bbc3));box-shadow:0px 5px 5px 0px rgba(34, 37, 47, 0.1), 0px 0px 5px 0px rgba(34, 37, 47, 0.1);background-color:var(--hmc-color-layout-container, var(--hmc-color-gray-white, #fff));position:absolute;min-width:100%;max-width:var(--hmc-dropdown-list-max-width, 100%);min-height:16px;overflow-x:hidden;overflow-y:auto;z-index:var(--z-index-dropdown, 7000);margin-top:4px;margin-left:-4px}.list-container.right{right:0px}.list-container.top{bottom:30px}.list-container.hidden{display:none;visibility:hidden}.helper-text{margin-top:4px}:host(.hovered) .dropdown{border-color:var(--hmc-color-interactive-subtle-hover, var(--hmc-color-gray-700, #5e6773))}:host(.hovered) .dropdown .dropdown-content{border-color:var(--hmc-color-interactive-subtle-hover, var(--hmc-color-gray-700, #5e6773))}';export{a as hmc_dropdown}